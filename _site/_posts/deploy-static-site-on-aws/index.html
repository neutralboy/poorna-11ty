<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" type="text/css" href="/index.css" />
    <title>How to deploy your static site on AWS S3 + Cloudfront in 2021 | Poorna's blog</title>
    <link
      rel="icon"
      type="image/png"
      href="https://res.cloudinary.com/poorna/image/upload/v1622972701/my-blog/logo/Screenshot_2021-06-06_at_15-14-35_Home_Poorna_s_Blog.png"
    />
    <meta name="description" content="Deploy your static site on AWS and use the complete advantage of cutting edge technology." />
    <meta property="og:description" content="Deploy your static site on AWS and use the complete advantage of cutting edge technology." />
    <meta property="og:title" content="How to deploy your static site on AWS S3 + Cloudfront in 2021 | Poorna's Blog " />
    <meta property="og:type" content="blog" />
    <meta property="og:url" content="https://www.poorna.dev/_posts/deploy-static-site-on-aws/" />
    <meta
      property="og:image"
      content="https://res.cloudinary.com/poorna/image/upload/v1640502671/my-blog/poorna%20blog%20image.png"
    />
    <meta property="og:image:type" content="image/png" />
    <meta property="og:image:alt" content="Poorna's blog logo" />
    <meta property="og:locale" content="en_US" />

    <meta property="og:article:published_time" content="Sat Feb 06 2021 21:57:07 GMT+0530 (India Standard Time)" />
    <meta property="og:article:tag" content="AWS, S3, CloudFront, Headless CMS, Static Site, JAM Stack" />
    <meta property="og:article:author" content="Poornachandra" />
  </head>

  <body class="bg-slate-200 font-primary">
    <nav class="w-full top-0 sticky py-5 bg-indigo-900">
      <div class="lg:container mx-auto flex justify-between">
        <a
          href="/"
          class="text-3xl underline text-slate-200 font-bold block my-auto"
        >
          Poorna
        </a>
        <div class="flex gap-x-4">
          <a href="/say-hello" class="text-slate-200 text-lg block my-auto hover:underline hover:text-slate-100">
            Say Hello
          </a>
          <a
            rel="noopener"
            href="https://www.linkedin.com/in/poornachandra-v/"
            class="p-0.5 bg-blue-500 hover:bg-blue-600 lg:block hidden my-auto"
          >
            <svg
              class="fill-current text-white block"
              width="24"
              height="24"
              viewBox="0 0 24 24"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                d="M13 21H9V9H13V11C13.8526 9.91525 15.1456 9.26857 16.525 9.237C19.0056 9.25077 21.0072 11.2694 21 13.75V21H17V14.25C16.84 13.1326 15.8818 12.3036 14.753 12.306C14.2593 12.3216 13.7932 12.5378 13.4624 12.9046C13.1316 13.2715 12.9646 13.7573 13 14.25V21ZM7 21H3V9H7V21ZM5 7C3.89543 7 3 6.10457 3 5C3 3.89543 3.89543 3 5 3C6.10457 3 7 3.89543 7 5C7 5.53043 6.78929 6.03914 6.41421 6.41421C6.03914 6.78929 5.53043 7 5 7Z"
              ></path>
            </svg>
          </a>
        </div>
      </div>
    </nav>

    <div
      class="bg-indigo-800 py-10 mb-14 flex justify-center border-b-8 border-b-indigo-600"
    >
      <div class="lg:container mx-auto flex justify-between px-4">
        <h1 class="text-5xl font-bold text-slate-100 block my-auto">
          How to deploy your static site on AWS S3 + Cloudfront in 2021
        </h1>
        <p
          class="block my-auto text-gray-600 bg-slate-200 px-2 py-1 rounded-md"
        >
          Intermediate
        </p>
      </div>
    </div>

    <div class="lg:container px-4 mx-auto">
      <div class="prose max-w-none mb-10"><blockquote>
<p>This guide is for advanced users with intricate knowledge of AWS and its services. If you're new to static sites you can try out <a href="https://www.netlify.com/">Netlify</a> they're a super simple way to deploy static sites. If you're asking why do it at all, its for bonus cool points.</p>
</blockquote>
<h1>How do we go about it ?</h1>
<p>Here are the steps of how to deploy it:</p>
<ol>
<li>Git your code</li>
<li>Using CodePipeline Trigger to add code to S3</li>
<li>Serve the contents of S3 over Cloudfront</li>
</ol>
<hr>
<p>Feel free to skip ahead to anything you've already done.</p>
<h1>Git</h1>
<p>You can use any of the following services to maintain your code</p>
<ul>
<li><a href="https://bitbucket.org/product/">Bitbucket</a></li>
<li><a href="https://github.com/">Github</a></li>
<li><a href="https://aws.amazon.com/codecommit/">AWS CodeCommit</a></li>
</ul>
<p>Once you have all your code commited and ready, move on to the next step.</p>
<hr>
<h1>Using CodePipeline Trigger</h1>
<blockquote>
<p>AWS CodePipeline is a tool that looks for commits and pulls made to a git repository and triggers an action on the code. Action may be postprocessing of data, building container images, exporting static files and so on.</p>
</blockquote>
<ol>
<li>
<h3>Go to the CodePipeline section and use the <code>Create pipeline</code> button.</h3>
<p><img src="https://res.cloudinary.com/poorna/image/upload/c_scale,w_900/v1612627201/my-blog/Screenshot_2021-02-06_CodePipeline_-_AWS_Developer_Tools.png" alt="Create Pipeline"></p>
</li>
<li>
<h3>Name your pipeline and use the New Service Role, it should give you enough permissions to make it work.</h3>
<p><img src="https://res.cloudinary.com/poorna/image/upload/c_scale,w_900/v1612627422/my-blog/Screenshot_2021-02-06_CodePipeline_-_AWS_Developer_Tools_2.png" alt="Name and create role">
Click on next</p>
</li>
<li>
<h3>Now choose the source of code</h3>
<p><img src="https://res.cloudinary.com/poorna/image/upload/c_scale,w_900/v1612627533/my-blog/Screenshot_2021-02-06_CodePipeline_-_AWS_Developer_Tools_3.png" alt="Source of code">
One you choose your source, AWS will ask you to connect your repo to the pipeline. Provide all necessary permissions.
Click Next.</p>
</li>
<li>
<h3>Skip the buid Stage</h3>
<p>Button is located at the bottom of the page
<img src="https://res.cloudinary.com/poorna/image/upload/c_scale,w_900/v1612627764/my-blog/Screenshot_2021-02-06_CodePipeline_-_AWS_Developer_Tools_4.png" alt="Skip the build stage"></p>
<blockquote>
<p>Skipping build stage implies that you already have deployable <code>index.html</code> in your git repo. If you do not consider using a build stage.</p>
</blockquote>
</li>
<li>
<h3>Choose AWS S3 as your deploy stage</h3>
<p><img src="https://res.cloudinary.com/poorna/image/upload/v1612627954/my-blog/Screenshot_2021-02-06_CodePipeline_-_AWS_Developer_Tools_5.png" alt="AWS S3 as deploy stage">
Choose any of your S3 buckets</p>
<blockquote>
<p>Check the Extract file before deploy option
<img src="https://res.cloudinary.com/poorna/image/upload/v1612628101/my-blog/Screenshot_2021-02-06_CodePipeline_-_AWS_Developer_Tools_6.png" alt="Extract before deploy"></p>
</blockquote>
</li>
<li>
<h3>Review and create your pipeline</h3>
<h4>Now commit a change to your code and check if its being executed.</h4>
<p>Click on the pipeline you just created and view its history. If the trigger has been setup correctly, here's what you'll see.</p>
<p><img src="https://res.cloudinary.com/poorna/image/upload/c_scale,w_900/v1612628312/my-blog/Screenshot_2021-02-06_CodePipeline_-_AWS_Developer_Tools_7.png" alt="Successful Trigger"></p>
</li>
</ol>
<hr>
<h1>Setting up CloudFront</h1>
<blockquote>
<p>Cloudfront is AWS CDN service that can serve objects from globally cached edge nodes. It can be used to serve images, css, html, php and all static assets. Video Livestreaming is also possible.</p>
</blockquote>
<ol>
<li>
<h3>Create a new distrubution</h3>
Navigate to the AWS Cloudfront service and create a new distrubution.
<img src="https://res.cloudinary.com/poorna/image/upload/c_scale,w_900/v1612628717/my-blog/Screenshot_2021-02-06_AWS_CloudFront_Management_Console.png" alt="Create a new distrubution"></li>
<li>
<h3>Choose the S3 bucket you want to serve from.</h3>
<img src="https://res.cloudinary.com/poorna/image/upload/c_scale,w_900/v1612631494/my-blog/Screenshot_2021-02-06_AWS_CloudFront_Management_Console_1.png" alt="Choose S3 bucket">
<blockquote>
<p>Use the <em>Origin Path</em> option to make sure you serve the right files. Here's an example of what it looks like:
<img src="https://res.cloudinary.com/poorna/image/upload/c_scale,w_900/v1612631494/my-blog/Screenshot_2021-02-06_AWS_CloudFront_Management_Console_1.png" alt="Origin Path option"></p>
</blockquote>
</li>
<li>
<h3>Configure a few more options</h3>
Leave most options to their defaults, here are a few I recommend changing:
<ul>
<li>
<h4>Compress Objects Automatically: YES</h4>
</li>
<li>
<h4>Alternate Domain Names: &lt; custom domain &gt;</h4>
<blockquote>
<p>If you want a custom domain, AWS automatically provisions a SSL certificate.</p>
</blockquote>
</li>
<li>
<h4>Custom SSL Certificate</h4>
</li>
</ul>
</li>
</ol>
<hr>
<h2>Click Deploy and you are done.</h2>
<p>Now you must have a cloudfront domain deployed at your custom domain</p>
<p>Here's how the Cloufront Distrubution looks once its done!
<img src="https://res.cloudinary.com/poorna/image/upload/c_scale,w_900/v1612632096/my-blog/Screenshot_2021-02-06_AWS_CloudFront_Management_Console_3.png" alt="Completed"></p>
<hr>
<p><img src="https://res.cloudinary.com/poorna/image/upload/v1612632204/my-blog/tenor.gif" alt="Celebration"></p>
</div>
    </div>

    <a href="/" class="sticky bottom-0 text-xl bg-white px-3 py-2 rounded-r-md">
      <svg
        xmlns="http://www.w3.org/2000/svg"
        fill="none"
        viewBox="0 0 24 24"
        stroke-width="1.5"
        stroke="currentColor"
        class="w-6 h-6 inline"
      >
        <path
          stroke-linecap="round"
          stroke-linejoin="round"
          d="M10.5 19.5L3 12m0 0l7.5-7.5M3 12h18"
        />
      </svg>
      Go back
    </a>
  </body>
</html>
